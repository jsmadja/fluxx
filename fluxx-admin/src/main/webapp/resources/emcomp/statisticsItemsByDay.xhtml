<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:component xmlns:ui="http://java.sun.com/jsf/facelets"
              xmlns:composite="http://java.sun.com/jsf/composite">
    <composite:interface>
        <composite:attribute name="data" required="true"/>
        <composite:attribute name="maxItems" required="true"/>
    </composite:interface>

    <composite:implementation>
        <div id="fig" style="background-color: white; width: 527px" >
                <script type="text/javascript+protovis">

                    var numDays = 33;
                    var barWidth = 15;
                    var maxItems = #{cc.attrs.maxItems};
                    var ratio = 1.2;
                    var leftMargin = 30;
                    var height = 300;

                    // configuration image
                    var vis = new pv.Panel()
                    .width( (numDays * barWidth) + numDays)
                    .height(height);

                    // repere horizontal
                    vis.add(pv.Rule)
                    .data(pv.range(0, maxItems*ratio, 100))
                    .bottom(function(d) d*(height/ratio) /maxItems)
                    .add(pv.Label);

                    // barre
                    vis.add(pv.Bar)
                    .data(#{cc.attrs.data})
                    .width(barWidth)
                    .height(function(d) d*(height/ratio) / maxItems)
                    .bottom(0)
                    .left(function() leftMargin + (this.index * (barWidth+1)) );

                    vis.render();
                </script>
            </div>
    </composite:implementation>
</ui:component>
