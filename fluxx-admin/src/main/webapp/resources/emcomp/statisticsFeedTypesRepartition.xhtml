<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:component xmlns:ui="http://java.sun.com/jsf/facelets"
              xmlns:composite="http://java.sun.com/jsf/composite">
    <composite:interface>
        <composite:attribute name="data" required="true"/>
    </composite:interface>

    <composite:implementation>
        <div id="center"><div id="fig">
                <script type="text/javascript+protovis">

                    /* Sizing and scales. */
                    var w = 400,
                    h = 400,
                    r = w / 2,
                    a = pv.Scale.linear(0, pv.sum(#{cc.attrs.data})).range(0, 2 * Math.PI);

                    /* The root panel. */
                    var vis = new pv.Panel()
                    .width(w)
                    .height(h);

                    /* The wedge, with centered label. */
                    vis.add(pv.Wedge)
                    .data(#{cc.attrs.data})
                    .bottom(w / 2)
                    .left(w / 2)
                    .innerRadius(r - 40)
                    .outerRadius(r)
                    .angle(a)
                    .event("mouseover", function() this.innerRadius(0))
                    .event("mouseout", function() this.innerRadius(r - 40))
                    .anchor("center").add(pv.Label)
                    .visible(function(d) d > .15)
                    .textAngle(0)
                    .text(function(d) d.toFixed(2));

                    vis.render();

                </script>
            </div></div>
    </composite:implementation>
</ui:component>
