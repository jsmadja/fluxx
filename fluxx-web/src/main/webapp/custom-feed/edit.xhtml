<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition template="/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:fluxx="http://fluxx.fr.cn/custom-taglib"
                xmlns:emcomp="http://java.sun.com/jsf/composite/emcomp">
    <ui:define name="content_right">

        <h3>${msgs.page_title_edit_aggregatedfeed}</h3>

        <h4>${msgs.page_subtitle_your_aggregatedfeed}</h4>
        <h:form>
            <h:panelGrid columns="3" >
                <h:outputText value="${msgs.form_field_aggregatedfeed_name} * :"/>
                <h:inputText id="name" value="#{editAggregatedFeed.name}" />
                <h:message for="name" styleClass="error"/>

                <h:outputText value="${msgs.form_field_aggregatedfeed_numlastday} * :"/>
                <h:inputText id="numLastDay" required="true" maxlength="3" value="#{editCustomFeed.numLastDay}">
                    <f:validateLongRange minimum="1" maximum="100" />
                </h:inputText>
                <h:message for="numLastDay" styleClass="error"/>

                <h:commandButton  id="submit" value="${msgs.form_button_update}" action="#{editCustomFeed.update}"/>
            </h:panelGrid>
        </h:form>

        <h4>${msgs.page_subtitle_available_feeds}</h4>
        <div>
            <h:form>
                <h:dataTable id="availableFeedsTable" value="#{editCustomFeed.availableFeeds}" var="feed" width="500px" styleClass="table_header" rowClasses="table_row_style_1,table_row_style_2">
                    <h:column>
                        <f:facet name="header"></f:facet>
                        <fluxx:tendency feed="#{feed}" />
                    </h:column>
                    <h:column>
                        <f:facet name="header"><h:outputText value="${msgs.form_field_feed_name}"/></f:facet>
                        <h:commandLink action="#{editCustomFeed.addFeed}">
                            <h:outputText title="${feed.description}" value="${feed.title}" />
                        </h:commandLink>
                    </h:column>
                    <h:column>
                        <f:facet name="header"><h:outputText value="${msgs.form_field_feed_url}"/></f:facet>
                        <emcomp:rssIcon href="${feed.url}" />
                    </h:column>
                </h:dataTable>
            </h:form>

            <div id="myContainer"></div>
            <h:form id="completion">
                <h:inputText onfocus="clearText(this)" onblur="clearText(this)"  id="myInput" value="#{editCustomFeed.filter}" maxlength="20" size="20" style="width:200px">ex: people</h:inputText>
                <h:commandButton  style="margin-left: 210px;" id="submit" value="${msgs.form_button_filter}" action="#{editCustomFeed.filter}"/>
            </h:form>
            <div id="myAutoComplete">
            </div>
            <script type="text/javascript">
                YAHOO.example.BasicRemote = function() {
                    // Use an XHRDataSource
                    var oDS = new YAHOO.util.XHRDataSource("#{facesContext.externalContext.requestContextPath}/AutoCompleteCategory");
                    // Set the responseType
                    oDS.responseType = YAHOO.util.XHRDataSource.TYPE_TEXT;
                    // Define the schema of the delimited results
                    oDS.responseSchema = {
                        recordDelim: "\n",
                        fieldDelim: "\t"
                    };
                    // Enable caching
                    oDS.maxCacheEntries = 5;

                    // Instantiate the AutoComplete
                    var oAC = new YAHOO.widget.AutoComplete('completion:myInput', "myContainer", oDS);
                    oAC.maxResultsDisplayed = 25;

                    return {
                        oDS: oDS,
                        oAC: oAC
                    };
                }();
            </script>

            
        </div>
<div style="background-color: white; margin-top: 5px;vertical-align: middle">
                <img alt="" src="#{facesContext.externalContext.requestContextPath}/myimages/tendency/2-green.png" /> ${msgs.daily_activity},
                <img alt="" src="#{facesContext.externalContext.requestContextPath}/myimages/tendency/1-green.png" /> ${msgs.weekly_activity},
                <img alt="" src="#{facesContext.externalContext.requestContextPath}/myimages/tendency/2-black.png" /> ${msgs.monthly_activity},
                <img alt="" src="#{facesContext.externalContext.requestContextPath}/myimages/tendency/1-red.png" /> ${msgs.yearly_activity}
            </div>
        <h4>${msgs.page_subtitle_add_feed}</h4>
        <h:form>
            <h:panelGrid columns="3" >
                <h:outputText value="${msgs.form_field_feed_url} * :"/>
                <h:inputText id="url" value="#{editCustomFeed.newFeedUrl}" size="50" />
                <h:message for="url" styleClass="error"/>
                <h:commandButton  id="submit" value="${msgs.form_button_add}" action="#{editCustomFeed.addNewFeed}"/>
            </h:panelGrid>
        </h:form>
        
        <a href="#{facesContext.externalContext.requestContextPath}/faces/feed/import-opml.xhtml">${msgs.page_title_importopml}</a>
        
    </ui:define>
</ui:composition>
